1998-05-05  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* property-background.c: New functions that wrap fill_monitor()
	for proper usage by all callbacks.

	* property-background.c (set_background_mode set_orientation):
	Reorder things to avod filling the monitor twice.

	* property-background.c (fill_monitor): Fixed XDrawRectangle ->
	XFillRectangle confusion.  This is why tiled transparent
	gradient-less backgrounds were not working.
	(fill_monitor): Do not render a one-color gradient when we can
	just draw a solid rectangle.

1998-05-04  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* property-background.c (parse_func): Added command line handling
	for all of the background image control.  
	This lets you control the background from the command line
	entirely. 
	(args.c): New file.  Property configurators that do not require
	any special argument handling include this one in their Makefiles.

Sun May  3 11:33:33 1998  Tom Tromey  <tromey@cygnus.com>

	* main.c (property_main): If no previous session id, but `--init'
	specified, then assume it is a user request and always honor it.

1998-05-01  Michael Fulbright  <msf@redhat.com>

	* property-background.c: wpFileName was being set to values
	from local vars, so later when it was used these values were
	invalid. I made sure it is always pointing to something valid.

1998-05-01  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* property-background.c (fill_monitor): Only set the clock cursor
	if main_window exists.  It will not exist if we are are called
	with --init from the session manager.  Also, only get the colors
	from the gnome_color_selector if main_window exists.  Session
	management for background-properties now works!  Wheee!

1998-04-30  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* property-screensaver.cc (screensaver_write): 
	* property-mouse.c (mouse_write): 
	* property-keyboard.c (keyboard_write): 

	* property-background.c (background_write): Remember to call
	gnome_config_sync().

	* property-keyboard.c (keyboard_apply): 
	* property-mouse.c (mouse_apply): 
	* property-screensaver.cc (screensaver_apply): 
	* property-background.c (background_apply): Call property_applied().

	* main.c (property_applied): New function that should be called by
	property sheets when changes are applied.  They should call this
	when they receive the GNOME_PROPERTY_APPLY request in addition to
	doing their application stuff.  (This function sets a flag that
	indicates that the state should be saved when the program exits).

1998-04-30  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* property-background.c (image_dnd_drop): Drag and Drop frenezy!
	I added drop support to the monitor widget, so now you can drag
	files there. 
	(fill_monitor): Added error handling.  If we can not load the file
	that is specified, do not die, but select Pixmap=none instead.

1998-04-30  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* property-background.c (fill_monitor): Use plain Imlib (not
	gdk_imlib) for operations.  This means mixing gdk with xlib,
	woohoo.  Also fixed some sizing errors.

	* imlib-misc.c: New file that does several nasty things with
	imlib.  It will force a second instance of imlib to be initialized
	with the system default visual (we need it to set the root
	window's background).  The get_monitor_preview_widget() function
	also resides here now, and it now returns a GtkPixmap inside a
	GtkEventBox.  We need an event box because the widget needs its
	own X window.

	* Makefile.am (background_properties_SOURCES): Added
	imlib-misc.[ch] tothe sources.

1998-04-28  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* property-mouse.c (mouse_setup): Beautified the dialog.

	* property-keyboard.c (keyboard_setup): Beautified the dialog.

1998-04-28  Radek Doulik  <rodo@msdec.ms.mff.cuni.cz>

	* property-background.c: disable debug msgs, added scaled bg

1998-04-27  Radek Doulik  <rodo@msdec.ms.mff.cuni.cz>

	* property-background.c (fill_monitor): hope I fixed activating
	apply by color change

Sun Apr 19 10:29:12 EDT 1998 Gregory McLean <gregm@comstar.net>

	* screensaver.h, property-background.c: added in some #ifdef stuff
	to quell the diagnostic output, want it back? #define DEBUG, 
	re-compile, enjoy the spam.

Sun Mar 22 00:09:26 1998  Tom Tromey  <tromey@cygnus.com>

	* main.c (display_properties_action): Removed.

Sat Mar 21 23:07:27 1998  Tom Tromey  <tromey@cygnus.com>

	* main.c (display_properties_setup): Don't create any widgets;
	these have been moved into the property_box.
	(property_changed): Call gnome_property_box_changed.

	* property-screensaver.cc (setup): Configurator now has a
	property_box, not a notebook.
	* property-background.c (background_setup): Configurator now has a
	property_box, not a notebook.
	* property-keyboard.c (keyboard_setup): Configurator now has a
	property_box, not a notebook.
	* property-mouse.c (mouse_setup): Configurator now has a
	property_box, not a notebook.

Sat Mar 21 11:55:27 1998  Radek Doulik  <rodo@aquarius>

	* property-background.c: reworked, now uses imlib (scale pixmaps
	in preview, gradient BG is dithered by Imlib, ...  - big thanks
	to Rasterman for gdk_imlib)

	* xlockmore.cc (run): corrected position of preview
	removed/added some gtk_widget_destroy calls

	* property-background.c (fill_monitor): corrected solid bg
	position in preview

Tue Mar 10 14:49:11 1998  Miguel de Icaza/Federico Mena  <miguel@nuclecu.unam.mx>

	* main.c (get_monitor_preview_widget): Simplify and fix to use gdk_imlib.

Tue Mar 10 02:06:01 1998  Tom Tromey  <tromey@cygnus.com>

	* main.c (display_properties_setup): Use stock buttons.

1998-02-17  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* gnome-desktop.h: Moved the gnome_monitor stuff to property-background.c.
Sun Mar  8 18:40:05 1998  Tom Tromey  <tromey@cygnus.com>

	* property-mouse.c (mouse_read): rtol_default now gboolean.

	* property-mouse.c (mouse_rtol): Now gboolean.

	* property-keyboard.c (keyboard_read): repeat_default and
	click_default now gbooleans.

	* Makefile.am (INCLUDES): Added GNOME_INCLUDEDIR.

Sat Mar  7 11:55:05 1998  Tom Tromey  <tromey@cygnus.com>

	* main.c (arguments): New structure.
	(parser): Likewise.
	(parse_func): New function.
	(init): New global.

Mon Feb 23 00:17:18 1998  Tom Tromey  <tromey@cygnus.com>

	* gnome-desktop.h (property_main): Updated decl.

1998-02-19  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* app-mouse.c (main): Added app_id "mouse_properties".

	* app-keyboard.c (main): Added app_id "keyboard_properties".

	* app-background.c (main): Added app_id "background_properties".

	* main.c (property_main): Added app_id parameter to gnome_init().
	Added this parameter to the prototype of property_main() as well.

1998-02-17  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* main.c (property_main): Removed un-needed gtk_init().

Mon Feb 16 00:47:03 1998  Tom Tromey  <tromey@cygnus.com>

	* main.c (property_main): Pass actual argc, argv to
	gnome_client_new.

Sun Feb 15 23:04:00 1998  Tom Tromey  <tromey@cygnus.com>

	* property-background.c: Include <gdk/gdkx.h>.
	* property-mouse.c: Include <gdk/gdkx.h>.
	* property-keyboard.c: Include <gdk/gdkx.h>.

	* app-keyboard.c (application_property): New function.
	* app-background.c (application_property): New function.
	* gnome-desktop.h (application_property): Declare.
	* app-mouse.c (application_property): New function.

	* Makefile.am (mouse_properties_SOURCES): Don't mention gdkx.h.
	(keyboard_properties_SOURCES): Likewise.
	(background_properties_SOURCES): Likewise.
	(sys_DATA): New macro.
	(install-data-local): Removed.
	* gdkx.h: Removed.

	* main.c (state_changed): New global.
	(display_properties_action): Set it.

Mon Feb 16 11:29:13 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* main.c (property_main): Added bindtextddomain().

	* Makefile.am (INCLUDES): Define GNOMELOCALEDIR.

1998-02-14  Carsten Schaar  <nhadcasc@fs-maphy.uni-hannover.de>

	* main.c (property_main): Changed to use new SM support.

Sat Feb 14 01:46:44 1998  Tom Tromey  <tromey@cygnus.com>

	* Makefile.am (LDADD): Don't include DL_LIB or LEXLIB.  Do include
	INTLLIBS.

1998-02-14  Raja R Harinath  <harinath@cs.umn.edu>

	* Makefile.am (INCLUDES): Add $(X_CFLAGS).

1998-01-28  Raja R Harinath  <harinath@cs.umn.edu>

	* property-keyboard.c: Remove #ifdef HAVE_LIBINTL.

	* Makefile.am: Misc. fixes.

Tue Jan 27 13:57:26 1998  Federico Mena  <federico@bananoid.nuclecu.unam.mx>

	* Makefile.am (install-data-local): Update installation of
	.desktop files.

1998-01-26  Mark Galassi  <rosalia@cygnus.com>

	* Makefile.am (LDADD): added $(DL_LIB) since these are now
	required for any user of libgnome.a.

Tue Jan 27 09:00:32 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* {app,property}-{background,keyboard,mouse}.c: 
	make sure that they include <config.h> and "gnome.h" for i18n. 
	* property-screensaver.cc: likewise.
	And comment out #ifdef HAVE_INTL ... #endif.
	* main.c: include <config.h>.
	(property_main): add textdomain() below gnome_init().
	desktop-property now i18ned !  (some compilation warnings remain.)

Wed Jan 21 00:41:27 1998  Federico Mena <federico@bananoid.nuclecu.unam.mx>

	(Based on patch from Raja R Harinath <harinath@cs.umn.edu> *
	property-screensaver.cc (ConfigScreenSaver::nice_changed): Wrong
	field was being updated.
	(screensaver_register): Looked ugly inside extern "C" { }.

	* screensaver.h: Get proper definition for NULL, not some random
	definition from glib.h.
	
Fri Jan  2 14:53:14 1998  Federico Mena  <federico@bananoid.nuclecu.unam.mx>

	* property-background.c: Added #include <string.h>.

	* property-keyboard.c (rbutton_toggled, rate_changed,
	delay_changed, cbutton_toggled, cvol_changed): Made these
	functions return void, same as below.

	* property-mouse.c (scale_moved, button_toggled): Made these
	functions return void in agreement with the signal they handle.

Wed Dec 10 17:46:07 1997  Tom Tromey  <tromey@cygnus.com>

	* main.c (display_properties_setup): Use C-style
	comment. (Reported by Bruce Perens).
	(property_main): Register an initialization command with
	the session manager.

	* Makefile.am (LDADD): Added x_libs.

	* main.c (property_main): Changes to track changes to session
	code.

Sat Dec  6 23:28:40 1997  Tom Tromey  <tromey@cygnus.com>

	* main.c (property_main): Minimal attempt at saving state with
	session manager.

Sun Nov 30 22:14:27 1997  Tom Tromey  <tromey@cygnus.com>

	* property-screensaver.cc (screensaver_read): `lock' property now
	boolean.
	(screensaver_write): Likewise.

	* property-mouse.c (mouse_read): `right-to-left' property now boolean.
	(mouse_write): Likewise.

	* property-keyboard.c (keyboard_read): `rate' and `click'
	properties now boolean.
	(keyboard_write): Likewise.

Wed Nov 26 15:39:16 1997  Tom Tromey  <tromey@cygnus.com>

	* keyboard.desktop, mouse.desktop, background.desktop: New files.
	* app-background.c, app-mouse.c, app-keyboard.c: New files.
	* Makefile.am (bin_PROGRAMS): Install new programs.
	(mouse_properties_SOURCES): New macro.
	(keyboard_properties_SOURCES): Likewise.
	(background_properties_SOURCES): Likewise.
	(EXTRA_DIST): Include only new desktop files.
	(install-data-local): Install only new desktop files.
	* desktop_properties.desktop: Removed.
	* property-screensaver.cc (settings_frame): Reversed normal, low
	labels in Settings frame.
	(nice_changed): Run property_changed.
	(select_mode): Likewise.
	(wait_changed): Likewise.
	(runPreviewXLock): Don't offset preview in y direction.
	* xlockmore.cc (prepareSetupWindow): Added Help button.  
	Make Cancel button work.  Set title on window.
	* property-background.c (radio_toggle_widget_active): Call
	property_changed.
	(set_background_mode): Likewise.
	(set_orientation): Likewise.
	(set_tiled_wallpaper): Likewise.
	(browse_activated): Likewise.
	(wp_selection_ok): Likewise.
	(color_changed): Removed.
	(color_setup): Connect signals after setting initial state.
	(wallpaper_setup): Likewise.
	* property-keyboard.c (rbutton_toggled): Call property_changed.
	(rate_changed): Likewise.
	(delay_changed): Likewise.
	(cbutton_toggled): Likewise.
	(cvol_changed): Likewise.
	* main.c (help): New function.
	(display_properties_setup): Added Help button; set title on main
	window.  Disable Apply button.
	(display_properties_action): Always apply to all pages; disable
	Apply button.
	(display_properties_register): Removed.
	(main): Call application_register.
	(apply_button): New global.
	(property_changed): New function.
	* property-mouse.c (button_toggled): Call property_changed.
	(scale_moved): Likewise.
	* gnome-desktop.h (property_changed): Declare.

Sun Nov  9 15:28:46 1997  Tom Tromey  <tromey@cygnus.com>

	* Makefile.am (desktop_properties_SOURCES): Added property-mouse.c.
	* main.c (display_properties_register): Run mouse_register.
	* property-mouse.c: New file.

Sat Oct 25 21:50:15 1997  Tom Tromey  <tromey@cygnus.com>

	* Makefile.am (install-data-local): Use INSTALL_DATA, not cp.

Tue Sep 23 01:47:56 1997  Radek Doulik  <rodo@aquarius>

	* main.c (display_properties_setup): make window unresizeable

 	* xlockmore.cc (prepareSetupWindow): added buttons to setup window

Mon Sep 22 22:12:23 1997  Radek Doulik  <rodo@aquarius>

	* xlockmore.cc (prepareSetupWindow): fix delete_event handling
	according to gtk+ changes

	* property-background.c (background_setup): unified padding - use
	GNOME_PAD defined in gnome-desktop.h

	* screensaver.h: screensaver modes are now in right order (before
	order changed by hashing)

Wed Sep 17 12:50:00 1997  Radek Doulik  <rodo@aquarius>

	* xlockmore.cc: small bug fix for gnome-0.2 with gtk+970916.

	* property-screensaver.cc: add support for internationalization. 
	
Fri Sep 12 19:54:29 1997  Radek Doulik  <rodo@aquarius>

	* xlockmore.cc: handle destroy signals

	* property-screensaver: Implemented the screen saver configurator.
